flowMeta:
  name: 狗狗营养师
  description: 狗狗也有一个专业的营养师
  avatarIcon: https://oss-beijing-m8.openstorage.cn/SparkBotProd/icon/generate/cht000b0825%40dx19bb4da2f58b8f3550.jpg
  avatarColor: '#FFEAD5'
  advancedConfig: '{"prologue":{"enabled":true,"inputExample":[""],"prologueText":"你好，我是一名狗狗营养师，可以为你的狗狗提供专业的营养建议，帮助它们保持健康快乐的生活。"},"textToSpeech":{"enabled":true,"vcn_cn":"x4_lingxiaoqi","vcn_en":"x4_EnUs_Luna"},"needGuide":false,"chatBackground":{"enabled":true,"info":{"name":"2c60eea1-8bcd-43e7-bbd5-69e63425edcf.jpg","type":"jpg","total":"1.59
    MB","url":"https://oss-beijing-m8.openstorage.cn/SparkBotProd/icon/user/sparkBot_1768267806143_2c60eea1-8bcd-43e7-bbd5-69e63425edcf.jpg"}}}'
  category: 39
  dslVersion: v1
flowData:
  nodes:
  - id: node-start::d61b0f71-87ee-475e-93ba-f1607f0ce783
    dragging: false
    selected: false
    width: 255
    height: 73
    position:
      x: -1653.4434791459223
      y: 677.0518052282728
    positionAbsolute:
      x: -1653.4434791459223
      y: 677.0518052282728
    type: 开始节点
    data:
      allowInputReference: false
      allowOutputReference: true
      label: 开始
      status: ''
      nodeMeta:
        aliasName: 开始节点
        nodeType: 基础节点
      inputs: [
        ]
      outputs:
      - id: 0918514b-72a8-4646-8dd9-ff4a8fc26d44
        name: AGENT_USER_INPUT
        nameErrMsg: ''
        schema:
          type: string
          default: 用户本轮对话输入内容
        required: true
        deleteDisabled: true
      nodeParam: {
        }
      icon: https://oss-beijing-m8.openstorage.cn/pro-bucket/sparkBot/common/workflow/icon/start-node-icon.png
      description: 工作流的开启节点，用于定义流程调用所需的业务变量信息。
      updatable: false
  - id: node-end::cda617af-551e-462e-b3b8-3bb9a041bf88
    dragging: false
    selected: false
    width: 255
    height: 73
    position:
      x: 2377.892070166741
      y: 754.28110029243
    positionAbsolute:
      x: 2377.892070166741
      y: 754.28110029243
    type: 结束节点
    data:
      allowInputReference: true
      allowOutputReference: false
      label: 结束
      references: [
        ]
      status: ''
      nodeMeta:
        aliasName: 结束节点
        nodeType: 基础节点
      inputs:
      - id: 82de2b42-a059-4c98-bffb-b6b4800fcac9
        name: output1
        nameErrMsg: ''
        schema:
          type: string
          value:
            type: ref
            content:
              name: output
              id: fad052fd-0310-4e5d-afd2-452548025420
              nodeId: spark-llm::ab9eef29-f3a4-40e8-b78c-e75d2213f088
            contentErrMsg: ''
        fileType: ''
      - id: 656f3c48-7775-4f35-b889-f0fbc59c0076
        name: output2
        nameErrMsg: ''
        schema:
          type: string
          value:
            type: ref
            content:
              name: data.image_url
              id: 903dc791-0b2e-43d4-bd88-2dfd92abdb46
              nodeId: plugin::d06927c8-9a67-400c-ae86-7a59a2d821a2
            contentErrMsg: ''
        fileType: ''
      outputs: [
        ]
      nodeParam:
        template: |-
          ![]({{output2}})
          {{output1}}
        streamOutput: true
        templateErrMsg: ''
        outputMode: 1
        reasoningTemplate: |2+

      icon: https://oss-beijing-m8.openstorage.cn/pro-bucket/sparkBot/common/workflow/icon/end-node-icon.png
      description: 工作流的结束节点，用于输出工作流运行后的最终结果。
      updatable: false
  - id: plugin::0e0a2e4e-a1be-47aa-bc70-24d39d6a2823
    dragging: false
    selected: false
    width: 333
    height: 99
    position:
      x: 1445.6274880155129
      y: 541.2172108014449
    positionAbsolute:
      x: 1445.6274880155129
      y: 541.2172108014449
    type: 工具
    data:
      allowInputReference: true
      allowOutputReference: true
      label: 聚合搜索_1
      labelEdit: false
      references: [
        ]
      status: ''
      nodeMeta:
        aliasName: 工具
        nodeType: 工具
      inputs:
      - id: 231bc586-2b8b-4a37-b3d4-3bdcb13b3356
        name: limit
        nameErrMsg: ''
        schema:
          type: integer
          value:
            type: literal
            content: '1'
            contentErrMsg: ''
        description: 返回网页数量
        required: true
        disabled: false
      - id: d0b5719f-289a-49e8-bd4d-053337ba5d5e
        name: name
        nameErrMsg: ''
        schema:
          type: string
          value:
            type: ref
            content:
              name: output
              id: d3c82476-3c20-4cbe-b507-1b4ebc64fe1e
              nodeId: text-joiner::b501422e-11e7-49b9-a8f3-9f2a7cf4ef5e
            contentErrMsg: ''
        description: 检索关键词
        required: true
        disabled: false
      - id: 22b1b740-3248-418c-bdcc-ec60014a4360
        name: open_rerank
        nameErrMsg: ''
        schema:
          type: boolean
          value:
            type: literal
            content: 'True'
            contentErrMsg: ''
        description: 结果是否重排序
        required: true
        disabled: false
      - id: 415e7484-5fb2-41b3-9769-638a28f61467
        name: full_text
        nameErrMsg: ''
        schema:
          type: boolean
          value:
            type: literal
            content: 'True'
            contentErrMsg: ''
        description: 是否开启全文内容
        required: true
        disabled: false
      outputs:
      - id: 5289449c-9f75-4a45-8a60-4a99eeb07d68
        name: data
        schema:
          type: object
          properties:
          - id: 427ce060-eecd-4d55-a9e1-0d22100d7232
            name: classify_domain
            type: array-string
            properties: [
              ]
          - id: 08f765bd-d032-47b1-bb5e-c226b51f0835
            name: documents
            type: array-object
            properties: [
              ]
          - id: ed39ac18-ef4b-419c-b1d1-6377ec5ecb1f
            name: more_documents
            type: array-object
            properties: [
              ]
      - id: b4b323c2-bb90-4e18-83fb-0ccf32407157
        name: success
        schema:
          type: boolean
      - id: 2f6fe6a1-a153-4340-b5c3-05709ededfa4
        name: err_code
        schema:
          type: string
      nodeParam:
        uid: '11524255856'
        code: ''
        toolDescription: 使用网络搜索公开信息
        pluginId: tool@7b783cae9c21000
        appId: 12a0a7e2
        operationId: 聚合搜索-b5HNlLDD
        version: V1.0
        businessInput: [
          ]
      icon: https://oss-beijing-m8.openstorage.cn/pro-bucket/sparkBot/common/workflow/icon/tool-icon.png
      updatable: false
      isLatest: true
  - id: plugin::bb64f9ad-de9f-489e-be66-c43f5d0931d3
    dragging: false
    selected: false
    width: 361
    height: 99
    position:
      x: 1447.888513525608
      y: 789.0006171186726
    positionAbsolute:
      x: 1447.888513525608
      y: 789.0006171186726
    type: 工具
    data:
      allowInputReference: true
      allowOutputReference: true
      label: 联网搜索_1
      labelEdit: false
      references: [
        ]
      status: ''
      nodeMeta:
        aliasName: 工具
        nodeType: 工具
      inputs:
      - id: 918b7719-789b-411b-bfc7-24afbb00b8bc
        name: name
        nameErrMsg: ''
        schema:
          type: string
          value:
            type: ref
            content:
              name: output
              id: d3c82476-3c20-4cbe-b507-1b4ebc64fe1e
              nodeId: text-joiner::b501422e-11e7-49b9-a8f3-9f2a7cf4ef5e
            contentErrMsg: ''
        description: 需要搜索的问题
        required: true
        disabled: false
      outputs:
      - id: 08ee3bfe-da47-4245-93ce-3e40fdf91421
        name: msg
        schema:
          type: string
      - id: 95f6f08e-da26-4091-bad3-98b4aad540f4
        name: result
        schema:
          type: array-object
          properties:
          - id: 6889bad9-3055-4f73-b6a9-7002b55e5c01
            name: summary
            type: string
          - id: 9035b42e-d825-4263-a3f6-8528a1fa28c9
            name: img
            type: string
          - id: e53d48df-d96e-4297-8437-26fdf6216a86
            name: domain
            type: string
          - id: b10e3026-a6c8-4c66-9d7b-5b45f8746e1a
            name: name
            type: string
          - id: 91a0b750-a76e-4ea3-9a67-073f4e04182b
            name: is_high_summary
            type: boolean
          - id: abe71f0e-67cc-488d-a114-6612ef3ddb61
            name: siteName
            type: string
          - id: 7f9f764e-97f0-4b8e-98bc-4a4a12c315fd
            name: source
            type: string
          - id: 761a52fe-70da-4ccf-b3b3-e75855621c7b
            name: type
            type: string
          - id: 9ba4e0bf-1e78-4eef-821d-35bfc24c186c
            name: url
            type: string
      - id: 23a42088-1e53-404d-84c7-76613e049c4a
        name: rc
        schema:
          type: string
      - id: 95108552-e174-4b26-a088-b2668664fe98
        name: semantic
        schema:
          type: array-string
          properties: [
            ]
      - id: 28527e10-a0ea-4e82-bdca-0a62c708acae
        name: total
        schema:
          type: string
      - id: 5320f25e-a73e-4613-9601-6f12353f3aff
        name: offset
        schema:
          type: string
      - id: 4b0b3c32-0843-42db-a838-c3b1cdd53e2b
        name: limit
        schema:
          type: string
      - id: 287f7f0c-aed9-4034-bdfc-d4e89c80ee49
        name: sid
        schema:
          type: string
      nodeParam:
        uid: '11524255856'
        code: ''
        toolDescription: 使用网络搜索公开信息
        pluginId: tool@665b86a9b821000
        appId: 12a0a7e2
        operationId: 聚合搜索-hL0CqmNi
        version: V1.0
        businessInput: [
          ]
      icon: https://oss-beijing-m8.openstorage.cn/pro-bucket/sparkBot/common/workflow/icon/tool-icon.png
      updatable: false
      isLatest: true
  - id: question-answer::d88c1544-c82f-47a8-9711-2df735c0b726
    dragging: false
    selected: false
    width: 265
    height: 167
    position:
      x: -1284.9076441419716
      y: 669.779387747332
    positionAbsolute:
      x: -1284.9076441419716
      y: 669.779387747332
    type: 问答节点
    data:
      allowInputReference: true
      allowOutputReference: true
      label: 狗狗类型
      labelEdit: false
      references: [
        ]
      status: ''
      nodeMeta:
        aliasName: 问答节点
        nodeType: 基础节点
      inputs: [
        ]
      outputs:
      - id: a75b048d-a26f-440e-9bb7-3e62bdde4d71
        name: query
        nameErrMsg: ''
        schema:
          type: string
          description: 该节点提问内容
          default: ''
        required: true
      - id: cf616097-1504-4349-89c0-5c3177cd6500
        name: content
        nameErrMsg: ''
        schema:
          type: string
          description: 用户回复内容
          default: ''
        required: true
      - id: c5c226a8-d15e-4ce2-b58a-df3088365fd2
        name: type
        nameErrMsg: ''
        schema:
          type: string
          description: 理解用户的语言并总结成狗狗类型的专有名词
          default: ''
        required: true
      nodeParam:
        topK: 4
        question: 狗狗的类型
        answerType: direct
        llmId: 110
        timeout: 3
        url: wss://spark-api.xf-yun.com/v4.0/chat
        uid: '11524255856'
        domain: 4.0Ultra
        appId: 12a0a7e2
        maxTokens: 2048
        temperature: 0.5
        model: spark
        directAnswer:
          handleResponse: true
          maxRetryCounts: 2
        serviceId: bm4
        llmIdErrMsg: ''
        needReply: false
        optionAnswer:
        - content_type: string
          name: A
          id: option-one-of::90f8de26-be7d-4a0c-88e8-c044622aacc3
          type: 2
          content: ''
        - content_type: string
          name: B
          id: option-one-of::808c69b4-2713-4b08-b478-92accd9cee4f
          type: 2
          content: ''
        - content_type: string
          name: default
          id: option-one-of::88c7303f-d7b9-406b-aa50-1ba977ce8f8c
          type: 1
          content: ''
        questionErrMsg: ''
      icon: https://oss-beijing-m8.openstorage.cn/SparkBot/test4/answer-new2.png
      description: 支持在此节点向用户提问，接收用户回复，并输出回复内容及提取的信息
      updatable: false
  - id: question-answer::18fc6717-803c-4467-a60b-012218d0c5f0
    dragging: false
    selected: false
    width: 255
    height: 245
    position:
      x: -916.4954871805319
      y: 665.7183786222714
    positionAbsolute:
      x: -916.4954871805319
      y: 665.7183786222714
    type: 问答节点
    data:
      allowInputReference: true
      allowOutputReference: true
      label: 性别
      labelEdit: false
      references: [
        ]
      status: ''
      nodeMeta:
        aliasName: 问答节点
        nodeType: 基础节点
      inputs: [
        ]
      outputs:
      - id: 8636ee2e-87ef-42d4-acdd-280f2d710090
        name: query
        nameErrMsg: ''
        schema:
          type: string
          description: 该节点提问内容
          default: ''
        required: true
      - id: 6c3488a3-aac3-41b4-8129-44684ec51c09
        name: id
        nameErrMsg: ''
        schema:
          type: string
          description: 用户回复的选项
          default: ''
        required: true
      - id: f93d1cc2-bec0-46f4-aa81-cd0b66070e02
        name: content
        nameErrMsg: ''
        schema:
          type: string
          description: 用户回复的选项内容
          default: ''
        required: true
      nodeParam:
        topK: 4
        question: 狗狗性别
        answerType: option
        llmId: 110
        timeout: 3
        url: wss://spark-api.xf-yun.com/v4.0/chat
        uid: '11524255856'
        domain: 4.0Ultra
        appId: 12a0a7e2
        maxTokens: 2048
        temperature: 0.5
        model: spark
        directAnswer:
          handleResponse: false
          maxRetryCounts: 2
        serviceId: bm4
        llmIdErrMsg: ''
        needReply: false
        optionAnswer:
        - content_type: string
          name: A
          contentErrMsg: ''
          id: option-one-of::14fa1283-3824-4428-989d-662bdc2b4749
          type: 2
          content: 男
        - content_type: string
          name: B
          contentErrMsg: ''
          id: option-one-of::a92681a8-66ef-4686-89de-e69679d4d08b
          type: 2
          content: 女
        - content_type: string
          name: default
          id: option-one-of::f5e8949d-b2f1-4f7a-9b9f-9db991913cdf
          type: 1
          content: ''
        questionErrMsg: ''
      icon: https://oss-beijing-m8.openstorage.cn/SparkBot/test4/answer-new2.png
      description: 支持在此节点向用户提问，接收用户回复，并输出回复内容及提取的信息
      updatable: false
  - id: question-answer::99feeb45-552b-4e11-b53e-8b8060c9a86f
    dragging: false
    selected: false
    width: 263
    height: 167
    position:
      x: -558.664657369223
      y: 660.1561788745722
    positionAbsolute:
      x: -558.664657369223
      y: 660.1561788745722
    type: 问答节点
    data:
      allowInputReference: true
      allowOutputReference: true
      label: 年龄
      labelEdit: false
      references: [
        ]
      status: ''
      nodeMeta:
        aliasName: 问答节点
        nodeType: 基础节点
      inputs: [
        ]
      outputs:
      - id: 950f936a-d848-4366-abcd-4b032e8f10df
        name: query
        nameErrMsg: ''
        schema:
          type: string
          description: 该节点提问内容
          default: ''
        required: true
      - id: 81dd938a-2b18-407e-aa40-1d5badf37262
        name: content
        nameErrMsg: ''
        schema:
          type: string
          description: 用户回复内容
          default: ''
        required: true
      - id: 30b1c464-1482-4372-af10-15867d396715
        name: age
        nameErrMsg: ''
        schema:
          type: string
          description: 理解用户的语言并总结成狗狗年龄
          default: ''
        required: true
      nodeParam:
        topK: 4
        question: 狗狗的年龄
        answerType: direct
        llmId: 110
        timeout: 3
        url: wss://spark-api.xf-yun.com/v4.0/chat
        uid: '11524255856'
        domain: 4.0Ultra
        appId: 12a0a7e2
        maxTokens: 2048
        temperature: 0.5
        model: spark
        directAnswer:
          handleResponse: true
          maxRetryCounts: 2
        serviceId: bm4
        llmIdErrMsg: ''
        needReply: false
        optionAnswer:
        - content_type: string
          name: A
          id: option-one-of::69573bba-48d7-4c44-92fb-55b29872f0e1
          type: 2
          content: ''
        - content_type: string
          name: B
          id: option-one-of::01659df3-39f4-4aa5-af26-8b21965fb7c8
          type: 2
          content: ''
        - content_type: string
          name: default
          id: option-one-of::01d71c00-8211-4573-90a8-f05a2f99d162
          type: 1
          content: ''
        questionErrMsg: ''
      icon: https://oss-beijing-m8.openstorage.cn/SparkBot/test4/answer-new2.png
      description: 支持在此节点向用户提问，接收用户回复，并输出回复内容及提取的信息
      updatable: false
  - id: question-answer::0d1d949b-6863-4dc6-8584-9480e5972889
    dragging: false
    selected: false
    width: 255
    height: 167
    position:
      x: -238.55388654087255
      y: 660.1561788745723
    positionAbsolute:
      x: -238.55388654087255
      y: 660.1561788745723
    type: 问答节点
    data:
      allowInputReference: true
      allowOutputReference: true
      label: 体重
      labelEdit: false
      references: [
        ]
      status: ''
      nodeMeta:
        aliasName: 问答节点
        nodeType: 基础节点
      inputs: [
        ]
      outputs:
      - id: 5182c41a-fc63-4390-b84c-1c8930073feb
        name: query
        nameErrMsg: ''
        schema:
          type: string
          description: 该节点提问内容
          default: ''
        required: true
      - id: e9f45d96-d04f-4d5c-81c4-6a815bb346ea
        name: content
        nameErrMsg: ''
        schema:
          type: string
          description: 用户回复内容
          default: ''
        required: true
      - id: 7c06575a-cc2f-4a71-a43b-d19983133cce
        name: kg
        nameErrMsg: ''
        schema:
          type: string
          description: 理解用户的语言并总结成狗狗的体重（kg）
          default: ''
        required: true
      nodeParam:
        topK: 4
        question: 狗狗的体重（kg）
        answerType: direct
        llmId: 110
        timeout: 3
        url: wss://spark-api.xf-yun.com/v4.0/chat
        uid: '11524255856'
        domain: 4.0Ultra
        appId: 12a0a7e2
        maxTokens: 2048
        temperature: 0.5
        model: spark
        directAnswer:
          handleResponse: true
          maxRetryCounts: 2
        serviceId: bm4
        llmIdErrMsg: ''
        needReply: false
        optionAnswer:
        - content_type: string
          name: A
          id: option-one-of::807945a8-0d59-498d-b45b-8fb14a123259
          type: 2
          content: ''
        - content_type: string
          name: B
          id: option-one-of::f68c4d3f-50cd-4b90-aa9e-7245cf3df143
          type: 2
          content: ''
        - content_type: string
          name: default
          id: option-one-of::d7fbef37-4caf-48f9-9d79-cd1deaf65daa
          type: 1
          content: ''
        questionErrMsg: ''
      icon: https://oss-beijing-m8.openstorage.cn/SparkBot/test4/answer-new2.png
      description: 支持在此节点向用户提问，接收用户回复，并输出回复内容及提取的信息
      updatable: false
  - id: question-answer::bc284f8e-3adc-4ead-b735-1126085895ab
    dragging: false
    selected: false
    width: 255
    height: 245
    position:
      x: 126.41317064559058
      y: 666.1154606323652
    positionAbsolute:
      x: 126.41317064559058
      y: 666.1154606323652
    type: 问答节点
    data:
      allowInputReference: true
      allowOutputReference: true
      label: 绝育情况
      labelEdit: false
      references: [
        ]
      status: ''
      nodeMeta:
        aliasName: 问答节点
        nodeType: 基础节点
      inputs: [
        ]
      outputs:
      - id: 96ae9bef-8566-4ca6-b62e-f971ef41073e
        name: query
        nameErrMsg: ''
        schema:
          type: string
          description: 该节点提问内容
          default: ''
        required: true
      - id: 78cdb517-19c0-4588-a8f2-224f04507af1
        name: id
        nameErrMsg: ''
        schema:
          type: string
          description: 用户回复的选项
          default: ''
        required: true
      - id: af82ec45-7b92-4d5e-9f8b-1412ee4d30c2
        name: content
        nameErrMsg: ''
        schema:
          type: string
          description: 用户回复的选项内容
          default: ''
        required: true
      nodeParam:
        topK: 4
        question: 狗狗是否已经绝育
        answerType: option
        llmId: 110
        timeout: 3
        url: wss://spark-api.xf-yun.com/v4.0/chat
        uid: '11524255856'
        domain: 4.0Ultra
        appId: 12a0a7e2
        maxTokens: 2048
        temperature: 0.5
        model: spark
        directAnswer:
          handleResponse: false
          maxRetryCounts: 2
        serviceId: bm4
        llmIdErrMsg: ''
        needReply: false
        optionAnswer:
        - content_type: string
          name: A
          contentErrMsg: ''
          id: option-one-of::07337c6f-18cb-45b3-a60c-5fb7b1e04953
          type: 2
          content: 已绝育
        - content_type: string
          name: B
          contentErrMsg: ''
          id: option-one-of::431da5ed-6cf9-4c93-afa4-ff4d2de685bf
          type: 2
          content: 未绝育
        - content_type: string
          name: default
          id: option-one-of::87266176-6954-4faf-b758-d773403978bd
          type: 1
          content: ''
        questionErrMsg: ''
      icon: https://oss-beijing-m8.openstorage.cn/SparkBot/test4/answer-new2.png
      description: 支持在此节点向用户提问，接收用户回复，并输出回复内容及提取的信息
      updatable: false
  - id: text-joiner::b501422e-11e7-49b9-a8f3-9f2a7cf4ef5e
    dragging: false
    selected: false
    width: 361
    height: 123
    position:
      x: 956.0648891225612
      y: 690.5825259186082
    positionAbsolute:
      x: 956.0648891225612
      y: 690.5825259186082
    type: 文本拼接
    data:
      allowInputReference: true
      allowOutputReference: true
      label: 特点总结
      labelEdit: false
      references: [
        ]
      status: ''
      nodeMeta:
        aliasName: 文本拼接
        nodeType: 工具
      inputs:
      - id: bce87c7a-2efb-4f26-86de-da9ede1b5103
        name: input1
        nameErrMsg: ''
        schema:
          type: string
          value:
            type: ref
            content:
              name: age
              id: 30b1c464-1482-4372-af10-15867d396715
              nodeId: question-answer::99feeb45-552b-4e11-b53e-8b8060c9a86f
            contentErrMsg: ''
        fileType: ''
      - id: f12447d9-03ba-499e-9337-dc1cc5c2ae77
        name: input2
        nameErrMsg: ''
        schema:
          type: string
          value:
            type: ref
            content:
              name: kg
              id: 7c06575a-cc2f-4a71-a43b-d19983133cce
              nodeId: question-answer::0d1d949b-6863-4dc6-8584-9480e5972889
            contentErrMsg: ''
        fileType: ''
      - id: aa9321fe-2dcc-42cc-acc4-bf30912d5d37
        name: input3
        nameErrMsg: ''
        schema:
          type: string
          value:
            type: ref
            content:
              name: content
              id: af82ec45-7b92-4d5e-9f8b-1412ee4d30c2
              nodeId: question-answer::bc284f8e-3adc-4ead-b735-1126085895ab
            contentErrMsg: ''
        fileType: ''
      - id: c10c8f93-e4f9-44f1-9e91-9477bae5e41d
        name: input4
        nameErrMsg: ''
        schema:
          type: string
          value:
            type: ref
            content:
              name: content
              id: f93d1cc2-bec0-46f4-aa81-cd0b66070e02
              nodeId: question-answer::18fc6717-803c-4467-a60b-012218d0c5f0
            contentErrMsg: ''
        fileType: ''
      - id: cceebf4d-bdad-4703-aa8e-2b73a3b4f1d6
        name: input5
        nameErrMsg: ''
        schema:
          type: string
          value:
            type: ref
            content:
              name: type
              id: c5c226a8-d15e-4ce2-b58a-df3088365fd2
              nodeId: question-answer::d88c1544-c82f-47a8-9711-2df735c0b726
            contentErrMsg: ''
        fileType: ''
      - id: 6a2ede66-6949-4e1c-a3f4-9bed0b3218b9
        name: input6
        nameErrMsg: ''
        schema:
          type: string
          value:
            type: ref
            content:
              name: content
              id: 6a854929-7b3f-401f-9c20-5daba3f87700
              nodeId: question-answer::6fa23fd2-3bae-46c4-90c4-0351d1be72fb
            contentErrMsg: ''
        fileType: ''
      outputs:
      - id: d3c82476-3c20-4cbe-b507-1b4ebc64fe1e
        name: output
        nameErrMsg: ''
        schema:
          type: string
      nodeParam:
        mode: 0
        uid: '11524255856'
        separatorErrMsg: ''
        appId: 12a0a7e2
        prompt: '{{input1}}{{input2}}{{input3}}{{input4}}{{input5}}狗的{{input6}}'
      icon: https://oss-beijing-m8.openstorage.cn/pro-bucket/sparkBot/common/workflow/icon/text-splicing-icon.png
      description: 用于按照指定格式规则处理多个字符串变量
      updatable: false
  - id: question-answer::6fa23fd2-3bae-46c4-90c4-0351d1be72fb
    dragging: false
    selected: false
    width: 255
    height: 297
    position:
      x: 567.1056025380493
      y: 688.5436038114215
    positionAbsolute:
      x: 567.1056025380493
      y: 688.5436038114215
    type: 问答节点
    data:
      allowInputReference: true
      allowOutputReference: true
      label: 餐食类型
      labelEdit: false
      references: [
        ]
      status: ''
      nodeMeta:
        aliasName: 问答节点
        nodeType: 基础节点
      inputs: [
        ]
      outputs:
      - id: 77e4ecc8-07ab-426c-a96a-db21f911de7d
        name: query
        nameErrMsg: ''
        schema:
          type: string
          description: 该节点提问内容
          default: ''
        required: true
      - id: ab2e2825-2ca0-4e66-bf6b-7cc160d9acb4
        name: id
        nameErrMsg: ''
        schema:
          type: string
          description: 用户回复的选项
          default: ''
        required: true
      - id: 6a854929-7b3f-401f-9c20-5daba3f87700
        name: content
        nameErrMsg: ''
        schema:
          type: string
          description: 用户回复的选项内容
          default: ''
        required: true
      nodeParam:
        topK: 4
        question: 想要定制的营养餐食类型
        answerType: option
        llmId: 110
        timeout: 3
        url: wss://spark-api.xf-yun.com/v4.0/chat
        uid: '11524255856'
        domain: 4.0Ultra
        appId: 12a0a7e2
        maxTokens: 2048
        temperature: 0.5
        model: spark
        directAnswer:
          handleResponse: false
          maxRetryCounts: 2
        serviceId: bm4
        llmIdErrMsg: ''
        needReply: false
        optionAnswer:
        - content_type: string
          name: A
          contentErrMsg: ''
          id: option-one-of::a499cde8-0edb-403e-9124-dbca2823af46
          type: 2
          content: 早餐
        - content_type: string
          name: B
          contentErrMsg: ''
          id: option-one-of::559369f3-7e76-45d1-ab29-34bc51020e1d
          type: 2
          content: 午餐
        - content_type: string
          name: C
          contentErrMsg: ''
          id: option-one-of::9616558a-712d-4328-8f3e-53d9ab631c80
          type: 2
          content: 晚餐
        - content_type: string
          name: D
          contentErrMsg: ''
          id: option-one-of::95d96829-0d03-4096-95de-fb1431103917
          type: 2
          content: 零食
        - content_type: string
          name: default
          id: option-one-of::809e6d64-67f4-4fc8-9f60-14b4a07acc09
          type: 1
          content: ''
        questionErrMsg: ''
      icon: https://oss-beijing-m8.openstorage.cn/SparkBot/test4/answer-new2.png
      description: 支持在此节点向用户提问，接收用户回复，并输出回复内容及提取的信息
      updatable: false
  - id: spark-llm::ab9eef29-f3a4-40e8-b78c-e75d2213f088
    dragging: false
    selected: true
    width: 255
    height: 123
    position:
      x: 1939.3001806748628
      y: 693.6409090793887
    positionAbsolute:
      x: 1939.3001806748628
      y: 693.6409090793887
    type: 大模型
    data:
      allowInputReference: true
      allowOutputReference: true
      label: 大模型_1
      labelEdit: false
      references: [
        ]
      status: ''
      nodeMeta:
        aliasName: 大模型
        nodeType: 基础节点
      inputs:
      - id: 9acaa915-9470-4a40-a624-5fa3a17cc92e
        name: input1
        nameErrMsg: ''
        schema:
          type: object
          value:
            type: ref
            content:
              name: data
              id: 5289449c-9f75-4a45-8a60-4a99eeb07d68
              nodeId: plugin::0e0a2e4e-a1be-47aa-bc70-24d39d6a2823
            contentErrMsg: ''
        fileType: ''
      - id: 2cdf3300-b1b7-43f9-9043-88f3cbe7b682
        name: input2
        nameErrMsg: ''
        schema:
          type: array-object
          value:
            type: ref
            content:
              name: result
              id: 95f6f08e-da26-4091-bad3-98b4aad540f4
              nodeId: plugin::bb64f9ad-de9f-489e-be66-c43f5d0931d3
            contentErrMsg: ''
        fileType: ''
      - id: 344b3ded-f0e8-4e78-9d46-87b923f1f2f8
        name: input3
        nameErrMsg: ''
        schema:
          type: string
          value:
            type: ref
            content:
              name: output
              id: d3c82476-3c20-4cbe-b507-1b4ebc64fe1e
              nodeId: text-joiner::b501422e-11e7-49b9-a8f3-9f2a7cf4ef5e
            contentErrMsg: ''
        fileType: ''
      outputs:
      - id: fad052fd-0310-4e5d-afd2-452548025420
        name: output
        nameErrMsg: ''
        schema:
          type: string
          default: ''
      nodeParam:
        topK: 4
        template: |-
          联网搜索的信息：{{input1}}、{{input2[0]}}
          关于狗狗的需求：{{input3}}
        enableChatHistoryV2:
          isEnabled: false
          rounds: 1
        auditing: default
        llmId: 110
        url: wss://spark-api.xf-yun.com/v4.0/chat
        uid: '11524255856'
        patchId: '0'
        templateErrMsg: ''
        domain: 4.0Ultra
        appId: 12a0a7e2
        maxTokens: 2048
        temperature: 0.5
        systemTemplate: |-
          ## 角色
          你是一个狗狗营养师，能够依据联网搜索到的信息，针对狗狗主人提出的各种关于狗狗的需求，给出专业、准确且实用的回复，助力狗狗健康成长。

          ## 技能
          1. 根据具体需求进行专业回复：
            - 当接收到狗狗主人关于狗狗具体需求时，迅速通过联网搜索相关专业知识，如不同犬种的营养需求特点、各成长阶段狗狗所需的营养成分等。
            - 结合搜索到的信息，为狗狗主人提供科学合理的饮食建议，包括适合的食物种类、喂食频率、食物分量等，以满足狗狗的营养需求。
          2. 解读与分析搜索信息：
            - 对联网搜索到的大量狗狗营养相关信息进行筛选和整理，去除不准确或不适用的内容。
            - 深入分析筛选后的信息，提取关键要点，以便能更精准地回应狗狗主人的具体问题，提供有针对性的营养方案。

          ## 限制
          - 仅围绕狗狗营养相关的话题展开交流，拒绝回答其他无关领域的问题。
          - 输出内容必须严格遵循给定的格式，不能随意更改框架结构。
        model: spark
        serviceId: bm4
        respFormat: 0
        llmIdErrMsg: ''
      icon: https://oss-beijing-m8.openstorage.cn/pro-bucket/sparkBot/common/workflow/icon/largeModelIcon.png
      description: 根据输入的提示词，调用选定的大模型，对提示词作出回答
      updatable: false
  - id: plugin::d06927c8-9a67-400c-ae86-7a59a2d821a2
    dragging: false
    selected: false
    width: 291
    height: 99
    position:
      x: 1455.309182014459
      y: 1042.7217388906977
    positionAbsolute:
      x: 1455.309182014459
      y: 1042.7217388906977
    type: 工具
    data:
      allowInputReference: true
      allowOutputReference: true
      label: 文生图 - 可灵版_1
      labelEdit: false
      references: [
        ]
      status: ''
      nodeMeta:
        aliasName: 工具
        nodeType: 工具
      inputs:
      - id: 0c0bde7b-c5b1-4612-ba1f-5d97cc8dd3ad
        name: description
        nameErrMsg: ''
        schema:
          type: string
          value:
            type: ref
            content:
              name: output
              id: d3c82476-3c20-4cbe-b507-1b4ebc64fe1e
              nodeId: text-joiner::b501422e-11e7-49b9-a8f3-9f2a7cf4ef5e
            contentErrMsg: ''
        description: 用户输入 （示例：落霞与孤鹜齐飞，秋水共长天一色）
        required: true
        disabled: false
      outputs:
      - id: 62f7106b-ccfa-4d1e-a360-3651b278cd7a
        name: sid
        schema:
          type: string
      - id: 7412c73e-c2de-4776-90be-17e79f3cc043
        name: code
        schema:
          type: integer
      - id: 2e7dc223-8555-4d8b-a79e-76b2a53736ee
        name: message
        schema:
          type: string
      - id: 3cdc4851-0de5-472c-a981-2b4a6fd1edd1
        name: data
        schema:
          type: object
          properties:
          - id: 903dc791-0b2e-43d4-bd88-2dfd92abdb46
            name: image_url
            type: string
      nodeParam:
        uid: '11524255856'
        code: ''
        toolDescription: 根据输入的描述，生成对应图片
        pluginId: tool@73690d6a0021000
        appId: 12a0a7e2
        operationId: 文生图 - 可灵版-X3Q0UT3s
        version: V1.0
        businessInput: [
          ]
      icon: https://oss-beijing-m8.openstorage.cn/pro-bucket/sparkBot/common/workflow/icon/tool-icon.png
      updatable: false
      isLatest: true
  edges:
  - source: node-start::d61b0f71-87ee-475e-93ba-f1607f0ce783
    target: question-answer::d88c1544-c82f-47a8-9711-2df735c0b726
    type: customEdge
    id: reactflow__edge-node-start::d61b0f71-87ee-475e-93ba-f1607f0ce783-question-answer::d88c1544-c82f-47a8-9711-2df735c0b726
    markerEnd:
      color: '#6356EA'
      type: arrow
    data:
      edgeType: curve
  - source: question-answer::d88c1544-c82f-47a8-9711-2df735c0b726
    target: question-answer::18fc6717-803c-4467-a60b-012218d0c5f0
    type: customEdge
    id: reactflow__edge-question-answer::d88c1544-c82f-47a8-9711-2df735c0b726-question-answer::18fc6717-803c-4467-a60b-012218d0c5f0
    markerEnd:
      color: '#6356EA'
      type: arrow
    data:
      edgeType: curve
  - source: question-answer::18fc6717-803c-4467-a60b-012218d0c5f0
    sourceHandle: option-one-of::14fa1283-3824-4428-989d-662bdc2b4749
    target: question-answer::99feeb45-552b-4e11-b53e-8b8060c9a86f
    type: customEdge
    id: reactflow__edge-question-answer::18fc6717-803c-4467-a60b-012218d0c5f0option-one-of::14fa1283-3824-4428-989d-662bdc2b4749-question-answer::99feeb45-552b-4e11-b53e-8b8060c9a86f
    markerEnd:
      color: '#6356EA'
      type: arrow
    data:
      edgeType: curve
  - source: question-answer::18fc6717-803c-4467-a60b-012218d0c5f0
    sourceHandle: option-one-of::a92681a8-66ef-4686-89de-e69679d4d08b
    target: question-answer::99feeb45-552b-4e11-b53e-8b8060c9a86f
    type: customEdge
    id: reactflow__edge-question-answer::18fc6717-803c-4467-a60b-012218d0c5f0option-one-of::a92681a8-66ef-4686-89de-e69679d4d08b-question-answer::99feeb45-552b-4e11-b53e-8b8060c9a86f
    markerEnd:
      color: '#6356EA'
      type: arrow
    data:
      edgeType: curve
  - source: question-answer::18fc6717-803c-4467-a60b-012218d0c5f0
    sourceHandle: option-one-of::f5e8949d-b2f1-4f7a-9b9f-9db991913cdf
    target: question-answer::99feeb45-552b-4e11-b53e-8b8060c9a86f
    type: customEdge
    id: reactflow__edge-question-answer::18fc6717-803c-4467-a60b-012218d0c5f0option-one-of::f5e8949d-b2f1-4f7a-9b9f-9db991913cdf-question-answer::99feeb45-552b-4e11-b53e-8b8060c9a86f
    markerEnd:
      color: '#6356EA'
      type: arrow
    data:
      edgeType: curve
  - source: question-answer::99feeb45-552b-4e11-b53e-8b8060c9a86f
    target: question-answer::0d1d949b-6863-4dc6-8584-9480e5972889
    type: customEdge
    id: reactflow__edge-question-answer::99feeb45-552b-4e11-b53e-8b8060c9a86f-question-answer::0d1d949b-6863-4dc6-8584-9480e5972889
    markerEnd:
      color: '#6356EA'
      type: arrow
    data:
      edgeType: curve
  - source: question-answer::0d1d949b-6863-4dc6-8584-9480e5972889
    target: question-answer::bc284f8e-3adc-4ead-b735-1126085895ab
    type: customEdge
    id: reactflow__edge-question-answer::0d1d949b-6863-4dc6-8584-9480e5972889-question-answer::bc284f8e-3adc-4ead-b735-1126085895ab
    markerEnd:
      color: '#6356EA'
      type: arrow
    data:
      edgeType: curve
  - source: question-answer::bc284f8e-3adc-4ead-b735-1126085895ab
    sourceHandle: option-one-of::07337c6f-18cb-45b3-a60c-5fb7b1e04953
    target: question-answer::6fa23fd2-3bae-46c4-90c4-0351d1be72fb
    type: customEdge
    id: reactflow__edge-question-answer::bc284f8e-3adc-4ead-b735-1126085895aboption-one-of::07337c6f-18cb-45b3-a60c-5fb7b1e04953-question-answer::6fa23fd2-3bae-46c4-90c4-0351d1be72fb
    markerEnd:
      color: '#6356EA'
      type: arrow
    data:
      edgeType: curve
  - source: question-answer::bc284f8e-3adc-4ead-b735-1126085895ab
    sourceHandle: option-one-of::431da5ed-6cf9-4c93-afa4-ff4d2de685bf
    target: question-answer::6fa23fd2-3bae-46c4-90c4-0351d1be72fb
    type: customEdge
    id: reactflow__edge-question-answer::bc284f8e-3adc-4ead-b735-1126085895aboption-one-of::431da5ed-6cf9-4c93-afa4-ff4d2de685bf-question-answer::6fa23fd2-3bae-46c4-90c4-0351d1be72fb
    markerEnd:
      color: '#6356EA'
      type: arrow
    data:
      edgeType: curve
  - source: question-answer::bc284f8e-3adc-4ead-b735-1126085895ab
    sourceHandle: option-one-of::87266176-6954-4faf-b758-d773403978bd
    target: question-answer::6fa23fd2-3bae-46c4-90c4-0351d1be72fb
    type: customEdge
    id: reactflow__edge-question-answer::bc284f8e-3adc-4ead-b735-1126085895aboption-one-of::87266176-6954-4faf-b758-d773403978bd-question-answer::6fa23fd2-3bae-46c4-90c4-0351d1be72fb
    markerEnd:
      color: '#6356EA'
      type: arrow
    data:
      edgeType: curve
  - source: question-answer::6fa23fd2-3bae-46c4-90c4-0351d1be72fb
    sourceHandle: option-one-of::a499cde8-0edb-403e-9124-dbca2823af46
    target: text-joiner::b501422e-11e7-49b9-a8f3-9f2a7cf4ef5e
    type: customEdge
    id: reactflow__edge-question-answer::6fa23fd2-3bae-46c4-90c4-0351d1be72fboption-one-of::a499cde8-0edb-403e-9124-dbca2823af46-text-joiner::b501422e-11e7-49b9-a8f3-9f2a7cf4ef5e
    markerEnd:
      color: '#6356EA'
      type: arrow
    data:
      edgeType: curve
  - source: question-answer::6fa23fd2-3bae-46c4-90c4-0351d1be72fb
    sourceHandle: option-one-of::559369f3-7e76-45d1-ab29-34bc51020e1d
    target: text-joiner::b501422e-11e7-49b9-a8f3-9f2a7cf4ef5e
    type: customEdge
    id: reactflow__edge-question-answer::6fa23fd2-3bae-46c4-90c4-0351d1be72fboption-one-of::559369f3-7e76-45d1-ab29-34bc51020e1d-text-joiner::b501422e-11e7-49b9-a8f3-9f2a7cf4ef5e
    markerEnd:
      color: '#6356EA'
      type: arrow
    data:
      edgeType: curve
  - source: question-answer::6fa23fd2-3bae-46c4-90c4-0351d1be72fb
    sourceHandle: option-one-of::9616558a-712d-4328-8f3e-53d9ab631c80
    target: text-joiner::b501422e-11e7-49b9-a8f3-9f2a7cf4ef5e
    type: customEdge
    id: reactflow__edge-question-answer::6fa23fd2-3bae-46c4-90c4-0351d1be72fboption-one-of::9616558a-712d-4328-8f3e-53d9ab631c80-text-joiner::b501422e-11e7-49b9-a8f3-9f2a7cf4ef5e
    markerEnd:
      color: '#6356EA'
      type: arrow
    data:
      edgeType: curve
  - source: question-answer::6fa23fd2-3bae-46c4-90c4-0351d1be72fb
    sourceHandle: option-one-of::95d96829-0d03-4096-95de-fb1431103917
    target: text-joiner::b501422e-11e7-49b9-a8f3-9f2a7cf4ef5e
    type: customEdge
    id: reactflow__edge-question-answer::6fa23fd2-3bae-46c4-90c4-0351d1be72fboption-one-of::95d96829-0d03-4096-95de-fb1431103917-text-joiner::b501422e-11e7-49b9-a8f3-9f2a7cf4ef5e
    markerEnd:
      color: '#6356EA'
      type: arrow
    data:
      edgeType: curve
  - source: question-answer::6fa23fd2-3bae-46c4-90c4-0351d1be72fb
    sourceHandle: option-one-of::809e6d64-67f4-4fc8-9f60-14b4a07acc09
    target: text-joiner::b501422e-11e7-49b9-a8f3-9f2a7cf4ef5e
    type: customEdge
    id: reactflow__edge-question-answer::6fa23fd2-3bae-46c4-90c4-0351d1be72fboption-one-of::809e6d64-67f4-4fc8-9f60-14b4a07acc09-text-joiner::b501422e-11e7-49b9-a8f3-9f2a7cf4ef5e
    markerEnd:
      color: '#6356EA'
      type: arrow
    data:
      edgeType: curve
  - source: text-joiner::b501422e-11e7-49b9-a8f3-9f2a7cf4ef5e
    target: plugin::0e0a2e4e-a1be-47aa-bc70-24d39d6a2823
    type: customEdge
    id: reactflow__edge-text-joiner::b501422e-11e7-49b9-a8f3-9f2a7cf4ef5e-plugin::0e0a2e4e-a1be-47aa-bc70-24d39d6a2823
    markerEnd:
      color: '#6356EA'
      type: arrow
    data:
      edgeType: curve
  - source: text-joiner::b501422e-11e7-49b9-a8f3-9f2a7cf4ef5e
    target: plugin::bb64f9ad-de9f-489e-be66-c43f5d0931d3
    type: customEdge
    id: reactflow__edge-text-joiner::b501422e-11e7-49b9-a8f3-9f2a7cf4ef5e-plugin::bb64f9ad-de9f-489e-be66-c43f5d0931d3
    markerEnd:
      color: '#6356EA'
      type: arrow
    data:
      edgeType: curve
  - source: plugin::0e0a2e4e-a1be-47aa-bc70-24d39d6a2823
    target: spark-llm::ab9eef29-f3a4-40e8-b78c-e75d2213f088
    type: customEdge
    id: reactflow__edge-plugin::0e0a2e4e-a1be-47aa-bc70-24d39d6a2823-spark-llm::ab9eef29-f3a4-40e8-b78c-e75d2213f088
    markerEnd:
      color: '#6356EA'
      type: arrow
    data:
      edgeType: curve
  - source: plugin::bb64f9ad-de9f-489e-be66-c43f5d0931d3
    target: spark-llm::ab9eef29-f3a4-40e8-b78c-e75d2213f088
    type: customEdge
    id: reactflow__edge-plugin::bb64f9ad-de9f-489e-be66-c43f5d0931d3-spark-llm::ab9eef29-f3a4-40e8-b78c-e75d2213f088
    markerEnd:
      color: '#6356EA'
      type: arrow
    data:
      edgeType: curve
  - source: text-joiner::b501422e-11e7-49b9-a8f3-9f2a7cf4ef5e
    target: plugin::d06927c8-9a67-400c-ae86-7a59a2d821a2
    type: customEdge
    id: reactflow__edge-text-joiner::b501422e-11e7-49b9-a8f3-9f2a7cf4ef5e-plugin::d06927c8-9a67-400c-ae86-7a59a2d821a2
    markerEnd:
      color: '#6356EA'
      type: arrow
    data:
      edgeType: curve
  - source: plugin::d06927c8-9a67-400c-ae86-7a59a2d821a2
    target: node-end::cda617af-551e-462e-b3b8-3bb9a041bf88
    type: customEdge
    id: reactflow__edge-plugin::d06927c8-9a67-400c-ae86-7a59a2d821a2-node-end::cda617af-551e-462e-b3b8-3bb9a041bf88
    markerEnd:
      color: '#6356EA'
      type: arrow
    data:
      edgeType: curve
  - source: spark-llm::ab9eef29-f3a4-40e8-b78c-e75d2213f088
    target: node-end::cda617af-551e-462e-b3b8-3bb9a041bf88
    type: customEdge
    id: reactflow__edge-spark-llm::ab9eef29-f3a4-40e8-b78c-e75d2213f088-node-end::cda617af-551e-462e-b3b8-3bb9a041bf88
    markerEnd:
      color: '#6356EA'
      type: arrow
    data:
      edgeType: curve
