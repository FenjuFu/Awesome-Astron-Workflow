flowMeta:
  name: 网络小说查找器
  description: 通过输入想查找的小说类型，查找最新的网络小说，并提供简介。
  avatarIcon: https://oss-beijing-m8.openstorage.cn/SparkBotProd/icon/common/emojiitem_00_41@2x.png
  avatarColor: '#FFEAD5'
  advancedConfig: '{"prologue":{"enabled":true,"inputExample":["","",""]},"textToSpeech":{"enabled":true,"vcn_cn":"x4_lingxiaoqi","vcn_en":"x4_EnUs_Luna"},"needGuide":false}'
  category: 15
  dslVersion: v1
flowData:
  nodes:
  - id: node-start::d61b0f71-87ee-475e-93ba-f1607f0ce783
    dragging: false
    selected: false
    width: 255
    height: 115
    position:
      x: -25.109019607843152
      y: 521.7086666666667
    positionAbsolute:
      x: -25.109019607843152
      y: 521.7086666666667
    type: 开始节点
    data:
      allowInputReference: false
      allowOutputReference: true
      label: 开始
      status: success
      nodeMeta:
        aliasName: 开始节点
        nodeType: 基础节点
      inputs: [
        ]
      outputs:
      - id: 0918514b-72a8-4646-8dd9-ff4a8fc26d44
        name: AGENT_USER_INPUT
        nameErrMsg: ''
        schema:
          type: string
          default: 用户本轮对话输入内容
        required: true
        deleteDisabled: true
      nodeParam: {
        }
      icon: https://oss-beijing-m8.openstorage.cn/pro-bucket/sparkBot/common/workflow/icon/start-node-icon.png
      description: 工作流的开启节点，用于定义流程调用所需的业务变量信息。
      updatable: false
  - id: node-end::cda617af-551e-462e-b3b8-3bb9a041bf88
    dragging: false
    selected: true
    width: 255
    height: 115
    position:
      x: 1766.045864012846
      y: 524.044170892495
    positionAbsolute:
      x: 1766.045864012846
      y: 524.044170892495
    type: 结束节点
    data:
      allowInputReference: true
      allowOutputReference: false
      label: 结束
      references: [
        ]
      status: success
      nodeMeta:
        aliasName: 结束节点
        nodeType: 基础节点
      inputs:
      - id: 82de2b42-a059-4c98-bffb-b6b4800fcac9
        name: output
        nameErrMsg: ''
        schema:
          type: string
          value:
            type: ref
            content:
              name: output
              id: bdd81dcf-0c3e-4701-a8fa-7d454ae58b16
              nodeId: spark-llm::9a5e74a5-af5f-416e-ba63-65fa83e18b61
            contentErrMsg: ''
        fileType: ''
      outputs: [
        ]
      nodeParam:
        template: "xxx类型小说：\n1.xxx \n简介:xxxx\n2.xxx\n简介:xxxx\n"
        streamOutput: true
        templateErrMsg: ''
        outputMode: 0
        reasoningTemplate: |-
          角色设定
          作为一位专业的图书推荐专家，我拥有丰富的网络文学资源库，熟悉各类流行小说的特点与趋势，致力于为用户提供个性化、高质量的阅读建议。
          目标任务
          根据用户提供的小说类型偏好，从海量网络小说中筛选出符合要求的最新作品，并向用户进行详细介绍和推荐。
          需求说明
          需要明确告知助手您感兴趣的小说类型（如言情、玄幻、科幻等），以便更准确地匹配相关书籍；同时欢迎分享任何特殊喜好或限制条件，以获得更加贴合个人口味的推荐结果。
      icon: https://oss-beijing-m8.openstorage.cn/pro-bucket/sparkBot/common/workflow/icon/end-node-icon.png
      description: 工作流的结束节点，用于输出工作流运行后的最终结果。
      updatable: false
  - id: extractor-parameter::d1d85fac-c437-4496-a3b2-1848d27cb275
    selected: false
    width: 255
    height: 165
    position:
      x: 330.2243584624929
      y: 521.7086666666667
    type: 变量提取器
    data:
      allowInputReference: true
      allowOutputReference: true
      label: 变量提取器_1
      labelEdit: false
      references: [
        ]
      status: success
      nodeMeta:
        aliasName: 变量提取器
        nodeType: 基础节点
      inputs:
      - id: 7b78e3ad-5d1d-4def-868a-9954e4502885
        name: input
        nameErrMsg: ''
        schema:
          type: string
          value:
            type: ref
            content:
              name: AGENT_USER_INPUT
              id: 0918514b-72a8-4646-8dd9-ff4a8fc26d44
              nodeId: node-start::d61b0f71-87ee-475e-93ba-f1607f0ce783
            contentErrMsg: ''
        fileType: ''
      outputs:
      - id: 364d03e8-39d1-46be-917c-7a7168cae1ed
        name: booktype
        nameErrMsg: ''
        schema:
          type: string
          description: 小说类型
        required: true
      nodeParam:
        topK: 4
        reasonMode: 1
        auditing: default
        llmId: 110
        url: wss://spark-api.xf-yun.com/v4.0/chat
        uid: '174515351'
        patchId: '0'
        domain: 4.0Ultra
        appId: 12a0a7e2
        maxTokens: 2048
        temperature: 0.5
        model: spark
        serviceId: bm4
        llmIdErrMsg: ''
      icon: https://oss-beijing-m8.openstorage.cn/pro-bucket/sparkBot/common/workflow/icon/variable-extractor-icon.png
      description: 结合提取变量描述，将上一节点输出的自然语言进行提取
      updatable: false
  - id: plugin::fb75727a-ad92-4fef-a778-b970c05600f2
    dragging: false
    selected: false
    width: 333
    height: 141
    position:
      x: 1004.3076676360769
      y: 524.2086666666667
    positionAbsolute:
      x: 1004.3076676360769
      y: 524.2086666666667
    type: 工具
    data:
      allowInputReference: true
      allowOutputReference: true
      label: 聚合搜索_1
      labelEdit: false
      references: [
        ]
      status: success
      nodeMeta:
        aliasName: 工具
        nodeType: 工具
      inputs:
      - id: 89b643c8-3074-497f-bb0d-64cf317a9bda
        name: limit
        nameErrMsg: ''
        schema:
          type: integer
          value:
            type: literal
            content: '3'
            contentErrMsg: ''
        description: 返回网页数量
        required: true
        disabled: false
      - id: 07deecaa-5823-4469-a798-48bbdcf50608
        name: name
        nameErrMsg: ''
        schema:
          type: string
          value:
            type: ref
            content:
              name: output
              id: 98d83fb9-1637-44dc-8ec2-45fc8408a95f
              nodeId: text-joiner::5d38cbd8-48b6-447c-83a7-b21f02bb33bc
            contentErrMsg: ''
        description: 检索关键词
        required: true
        disabled: false
      - id: 227bfff5-583f-470a-855e-9a06e328af47
        name: open_rerank
        nameErrMsg: ''
        schema:
          type: boolean
          value:
            type: literal
            content: '0'
            contentErrMsg: ''
        description: 结果是否重排序
        required: true
        disabled: false
      - id: cfbf8110-209b-4f32-8357-061b1b89643e
        name: full_text
        nameErrMsg: ''
        schema:
          type: boolean
          value:
            type: literal
            content: '1'
            contentErrMsg: ''
        description: 是否开启全文内容
        required: true
        disabled: false
      outputs:
      - id: 888a0fb4-456c-4b84-bc30-68848cbc2dec
        name: data
        schema:
          type: object
          properties:
          - id: 427ce060-eecd-4d55-a9e1-0d22100d7232
            name: classify_domain
            type: array-string
            properties: [
              ]
          - id: 08f765bd-d032-47b1-bb5e-c226b51f0835
            name: documents
            type: array-object
            properties: [
              ]
          - id: ed39ac18-ef4b-419c-b1d1-6377ec5ecb1f
            name: more_documents
            type: array-object
            properties: [
              ]
      - id: 23f5d7f0-8bd6-45ff-a3de-f9abb884ce72
        name: success
        schema:
          type: boolean
      - id: 57d51b0c-437f-4222-81a1-4741db993070
        name: err_code
        schema:
          type: string
      nodeParam:
        uid: '174515351'
        code: ''
        toolDescription: 使用网络搜索公开信息
        pluginId: tool@7b783cae9c21000
        appId: 12a0a7e2
        operationId: 聚合搜索-b5HNlLDD
        version: V1.0
        businessInput: [
          ]
      icon: https://oss-beijing-m8.openstorage.cn/pro-bucket/sparkBot/common/workflow/icon/tool-icon.png
      updatable: false
      isLatest: true
  - id: text-joiner::5d38cbd8-48b6-447c-83a7-b21f02bb33bc
    selected: false
    width: 255
    height: 165
    position:
      x: 685.5577248565359
      y: 521.7086666666667
    type: 文本拼接
    data:
      allowInputReference: true
      allowOutputReference: true
      label: 文本处理节点_1
      labelEdit: false
      references: [
        ]
      status: success
      nodeMeta:
        aliasName: 文本拼接
        nodeType: 工具
      inputs:
      - id: f122971c-accc-4e0d-afaf-3e6ed013da4f
        name: input
        nameErrMsg: ''
        schema:
          type: string
          value:
            type: ref
            content:
              name: booktype
              id: 364d03e8-39d1-46be-917c-7a7168cae1ed
              nodeId: extractor-parameter::d1d85fac-c437-4496-a3b2-1848d27cb275
            contentErrMsg: ''
        fileType: ''
      outputs:
      - id: 98d83fb9-1637-44dc-8ec2-45fc8408a95f
        name: output
        nameErrMsg: ''
        schema:
          type: string
      nodeParam:
        mode: 0
        uid: '174515351'
        separatorErrMsg: ''
        appId: 12a0a7e2
        prompt: '{{input}}类小说'
      icon: https://oss-beijing-m8.openstorage.cn/pro-bucket/sparkBot/common/workflow/icon/text-splicing-icon.png
      description: 用于按照指定格式规则处理多个字符串变量
      updatable: false
  - id: spark-llm::9a5e74a5-af5f-416e-ba63-65fa83e18b61
    dragging: false
    selected: false
    width: 255
    height: 165
    position:
      x: 1422.7659195892018
      y: 522.9586666666667
    positionAbsolute:
      x: 1422.7659195892018
      y: 522.9586666666667
    type: 大模型
    data:
      allowInputReference: true
      allowOutputReference: true
      label: 大模型_1
      labelEdit: false
      references: [
        ]
      status: success
      nodeMeta:
        aliasName: 大模型
        nodeType: 基础节点
      inputs:
      - id: d7917ce0-e340-41e0-b951-56ef7b8c43c8
        name: input
        nameErrMsg: ''
        schema:
          type: array-object
          value:
            type: ref
            content:
              name: data.documents
              id: 08f765bd-d032-47b1-bb5e-c226b51f0835
              nodeId: plugin::fb75727a-ad92-4fef-a778-b970c05600f2
            contentErrMsg: ''
        fileType: ''
      outputs:
      - id: bdd81dcf-0c3e-4701-a8fa-7d454ae58b16
        name: output
        nameErrMsg: ''
        schema:
          type: string
          default: ''
      nodeParam:
        topK: 4
        template: "提供{{input}}中时间最晚的，5本小说名字。\n输出格式:\nxxx类型小说：\n1.xxx \n简介:xxxx\n2.xxx\n\
          简介:xxxx"
        enableChatHistoryV2:
          isEnabled: false
          rounds: 1
        auditing: default
        llmId: 110
        url: wss://spark-api.xf-yun.com/v4.0/chat
        uid: '174515351'
        patchId: '0'
        templateErrMsg: ''
        domain: 4.0Ultra
        appId: 12a0a7e2
        maxTokens: 2048
        temperature: 0.5
        model: spark
        serviceId: bm4
        respFormat: 0
        llmIdErrMsg: ''
      icon: https://oss-beijing-m8.openstorage.cn/pro-bucket/sparkBot/common/workflow/icon/largeModelIcon.png
      description: 根据输入的提示词，调用选定的大模型，对提示词作出回答
      updatable: false
  edges:
  - source: node-start::d61b0f71-87ee-475e-93ba-f1607f0ce783
    sourceHandle: ''
    target: extractor-parameter::d1d85fac-c437-4496-a3b2-1848d27cb275
    type: customEdge
    id: reactflow__edge-node-start::d61b0f71-87ee-475e-93ba-f1607f0ce783-extractor-parameter::d1d85fac-c437-4496-a3b2-1848d27cb275
    markerEnd:
      color: '#6356EA'
      type: arrow
    data:
      edgeType: curve
  - source: extractor-parameter::d1d85fac-c437-4496-a3b2-1848d27cb275
    sourceHandle: ''
    target: text-joiner::5d38cbd8-48b6-447c-83a7-b21f02bb33bc
    type: customEdge
    id: reactflow__edge-extractor-parameter::d1d85fac-c437-4496-a3b2-1848d27cb275-text-joiner::5d38cbd8-48b6-447c-83a7-b21f02bb33bc
    markerEnd:
      color: '#6356EA'
      type: arrow
    data:
      edgeType: curve
  - source: text-joiner::5d38cbd8-48b6-447c-83a7-b21f02bb33bc
    target: plugin::fb75727a-ad92-4fef-a778-b970c05600f2
    type: customEdge
    id: reactflow__edge-text-joiner::5d38cbd8-48b6-447c-83a7-b21f02bb33bc-plugin::fb75727a-ad92-4fef-a778-b970c05600f2
    markerEnd:
      color: '#6356EA'
      type: arrow
    data:
      edgeType: curve
  - source: plugin::fb75727a-ad92-4fef-a778-b970c05600f2
    sourceHandle: ''
    target: spark-llm::9a5e74a5-af5f-416e-ba63-65fa83e18b61
    type: customEdge
    id: reactflow__edge-plugin::fb75727a-ad92-4fef-a778-b970c05600f2-spark-llm::9a5e74a5-af5f-416e-ba63-65fa83e18b61
    markerEnd:
      color: '#6356EA'
      type: arrow
    data:
      edgeType: curve
  - source: spark-llm::9a5e74a5-af5f-416e-ba63-65fa83e18b61
    target: node-end::cda617af-551e-462e-b3b8-3bb9a041bf88
    type: customEdge
    id: reactflow__edge-spark-llm::9a5e74a5-af5f-416e-ba63-65fa83e18b61-node-end::cda617af-551e-462e-b3b8-3bb9a041bf88
    markerEnd:
      color: '#6356EA'
      type: arrow
    data:
      edgeType: curve
